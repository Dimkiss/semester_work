# –°–µ–º–µ—Å—Ç—Ä–æ–≤–∞—è —Ä–∞–±–æ—Ç–∞

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞

### 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
```
git clone https://github.com/Dimkiss/semester_work.git
cd semester_work
```

### 2. –°–æ–∑–¥–∞–Ω–∏–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è

```
python -m venv venv
```

#### Linux / macOS

```
python3 -m venv venv
```

### 3. –ê–∫—Ç–∏–≤–∞—Ü–∏—è –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è

#### Windows (PowerShell)

```
venv\Scripts\activate
```

#### Windows (cmd)

```
venv\Scripts\activate.bat
```

#### Linux / macOS

```
source venv/bin/activate
```

–ü–æ—Å–ª–µ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ –≤ –Ω–∞—á–∞–ª–µ —Å—Ç—Ä–æ–∫–∏ —Ç–µ—Ä–º–∏–Ω–∞–ª–∞ –¥–æ–ª–∂–Ω–æ –ø–æ—è–≤–∏—Ç—å—Å—è `(venv)`.

### 4. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```
pip install -r requirements.txt
```
## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ –∏ –æ–ø–∏—Å–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤

### data/

#### `data/all_tables/`
CSV-—Ñ–∞–π–ª—ã –∏—Å—Ö–æ–¥–Ω—ã—Ö —Ç–∞–±–ª–∏—Ü, –ø–æ–ª—É—á–µ–Ω–Ω—ã—Ö –∏–∑ –¥–∞—Ç–∞—Å–µ—Ç–∞ RF200.

#### `data/test_set/`
JSON-—Ñ–∞–π–ª—ã —Å —Ä—É—á–Ω–æ–π —Ä–∞–∑–º–µ—Ç–∫–æ–π (gold standard) –¥–ª—è –æ—Ü–µ–Ω–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞ NER.

### outputs/

–°–æ–¥–µ—Ä–∂–∏—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ä–∞–±–æ—Ç—ã –º–æ–¥–µ–ª–µ–π NER:
- `*_spacy.json` ‚Äî —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã NER —Å –ø–æ–º–æ—â—å—é spaCy  
- `*_gigachat_zero.json` ‚Äî —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã GigaChat (zero-shot)
- `*_gigachat_few.json` ‚Äî —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã GigaChat (few-shot)
- `*_nel.json` ‚Äî —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ—Å–ª–µ NEL (Entity Linking)

### üìÇ reports/

–°–æ–¥–µ—Ä–∂–∏—Ç –æ—Ç—á—ë—Ç—ã –æ—Ü–µ–Ω–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞ NER:
- `ner_report_spacy.json`
- `ner_report_gigachat_zero.json`
- `ner_report_gigachat_few.json`

### üìÇ src/

#### `table_load.py`
–ó–∞–≥—Ä—É–∑—á–∏–∫ CSV-—Ç–∞–±–ª–∏—Ü RF200 —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ–º —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—è –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã.  
–ü–æ–∑–≤–æ–ª—è–µ—Ç:
- –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å (`|`, `;`, `,`, `\t`)
- —É–¥–∞–ª–∏—Ç—å —Å–ª—É–∂–µ–±–Ω—ã–π –ø–µ—Ä–≤—ã–π —Å—Ç–æ–ª–±–µ—Ü (–Ω—É–º–µ—Ä–∞—Ü–∏—é)
- –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞—Ç—å —Ç–∞–±–ª–∏—Ü—É –≤ –ø–ª–æ—Å–∫–∏–π —Å–ø–∏—Å–æ–∫ —è—á–µ–µ–∫ –¥–ª—è NER

–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏ –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –¥–ª—è NER. 

**–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤–Ω—É—Ç—Ä–∏ –ø—Ä–æ–µ–∫—Ç–∞**, –Ω–∞–ø—Ä—è–º—É—é –æ–±—ã—á–Ω–æ –Ω–µ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è, –∞ –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è –≤ `run.py` / `run_gigachat.py`.

**–û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:**

* –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—è (`| ; , \t`)
* —É–¥–∞–ª–µ–Ω–∏–µ —Å–ª—É–∂–µ–±–Ω–æ–≥–æ –ø–µ—Ä–≤–æ–≥–æ —Å—Ç–æ–ª–±—Ü–∞ (–Ω—É–º–µ—Ä–∞—Ü–∏—è)
* —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–ª–æ—Å–∫–æ–≥–æ —Å–ø–∏—Å–∫–∞ —è—á–µ–µ–∫ —Ç–∞–±–ª–∏—Ü—ã
* –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—è —Å—Ç—Ä–æ–∫ –∏ —Å—Ç–æ–ª–±—Ü–æ–≤
–û—Ç–ª–∏—á–Ω–æ, —Ç–µ–ø–µ—Ä—å –∫—Ä–∞—Ç–∫–æ –∏ –∞–∫–∫—É—Ä–∞—Ç–Ω–æ –æ–ø–∏—à—É **–∑–∞–ø—É—Å–∫ –∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –æ—Å—Ç–∞–ª—å–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤** ‚Äî –≤ —Ñ–æ—Ä–º–∞—Ç–µ, –≥–æ—Ç–æ–≤–æ–º –¥–ª—è README –∏–ª–∏ –æ—Ç—á—ë—Ç–∞.

---

#### `batch_run.py` ‚Äî –ø–∞–∫–µ—Ç–Ω—ã–π –∑–∞–ø—É—Å–∫ spaCy NER

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:**
–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç spaCy NER –¥–ª—è –Ω–∞–±–æ—Ä–∞ —Ç–∞–±–ª–∏—Ü RF200.

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
–ü—Ä–æ—Ö–æ–¥–∏—Ç –ø–æ –¥–∏–∞–ø–∞–∑–æ–Ω—É `table_id` –∏ –≤—ã–∑—ã–≤–∞–µ—Ç `run.py` –¥–ª—è –∫–∞–∂–¥–æ–π —Ç–∞–±–ª–∏—Ü—ã 

**–ó–∞–ø—É—Å–∫:**

```bash
python src/batch_run.py
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
‚ùå –Ω–µ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –∞—Ä–≥—É–º–µ–Ω—Ç—ã –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏
–ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è –≤–Ω—É—Ç—Ä–∏ —Ñ–∞–π–ª–∞:

* –¥–∏–∞–ø–∞–∑–æ–Ω —Ç–∞–±–ª–∏—Ü: `for table_id in range(201, 226)`
* –≤—Ö–æ–¥: `data/all_tables`
* –≤—ã—Ö–æ–¥: `outputs/{table_id}_spacy.json`
* `index_base = 1` ‚Äî –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—è —Å—Ç—Ä–æ–∫ –∏ —Å—Ç–æ–ª–±—Ü–æ–≤ —Å 1

---

#### `run.py` ‚Äî –∑–∞–ø—É—Å–∫ spaCy NER –¥–ª—è –æ–¥–Ω–æ–π —Ç–∞–±–ª–∏—Ü—ã

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:**
–ó–∞–ø—É—Å–∫ NER –Ω–∞ –±–∞–∑–µ spaCy –¥–ª—è –æ–¥–Ω–æ–π CSV-—Ç–∞–±–ª–∏—Ü—ã RF200 

**–ó–∞–ø—É—Å–∫:**

```bash
python src/run.py --tables_dir data/all_tables --table_id 201 --out outputs/201_spacy.json
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**

* `--tables_dir` ‚Äî –ø—É—Ç—å –∫ CSV-—Ç–∞–±–ª–∏—Ü–∞–º
* `--table_id` ‚Äî –Ω–æ–º–µ—Ä —Ç–∞–±–ª–∏—Ü—ã
* `--out` ‚Äî –ø—É—Ç—å –∫ –≤—ã—Ö–æ–¥–Ω–æ–º—É JSON
* `--model` ‚Äî spaCy-–º–æ–¥–µ–ª—å (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `ru_core_news_lg`)
* `--drop_first_col` ‚Äî `auto | true | false`
* `--drop_header` ‚Äî `true | false`
* `--index_base` ‚Äî `0` –∏–ª–∏ `1`
* `--quiet` ‚Äî –æ—Ç–∫–ª—é—á–∏—Ç—å –≤—ã–≤–æ–¥

---

#### `ner_spacy.py` ‚Äî NER —á–µ—Ä–µ–∑ spaCy

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:**
–ò–∑–≤–ª–µ–∫–∞–µ—Ç —Å—É—â–Ω–æ—Å—Ç–∏ –∏–∑ —Ç–µ–∫—Å—Ç–∞ —è—á–µ–π–∫–∏ —Å –ø–æ–º–æ—â—å—é spaCy –∏ –ø—Ä–∞–≤–∏–ª–∞ –¥–ª—è —á–∏—Å–µ–ª (QUANTITY) 

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤–Ω—É—Ç—Ä–∏ `run.py`, –Ω–∞–ø—Ä—è–º—É—é –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è.

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**

* –ø–æ–¥–¥–µ—Ä–∂–∫–∞ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã—Ö spaCy-—Å—É—â–Ω–æ—Å—Ç–µ–π
* –ø—Ä–∞–≤–∏–ª–æ –¥–ª—è —á–∏—Å–ª–æ–≤—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π (QUANTITY)

---

#### `ner_gigachat.py` ‚Äî NER —á–µ—Ä–µ–∑ GigaChat

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:**
NER –Ω–∞ –æ—Å–Ω–æ–≤–µ LLM GigaChat –≤ —Ä–µ–∂–∏–º–∞—Ö zero-shot –∏ few-shot 

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤–Ω—É—Ç—Ä–∏ `run_gigachat.py`, –Ω–∞–ø—Ä—è–º—É—é –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è.

**–†–µ–∂–∏–º—ã:**

* `zero` ‚Äî –±–µ–∑ –ø—Ä–∏–º–µ—Ä–æ–≤
* `few` ‚Äî —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏ –≤ –ø—Ä–æ–º–ø—Ç–µ

---

#### `run_gigachat.py` ‚Äî –∑–∞–ø—É—Å–∫ GigaChat NER –¥–ª—è –æ–¥–Ω–æ–π —Ç–∞–±–ª–∏—Ü—ã

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:**
–ó–∞–ø—É—Å–∫ NER —á–µ—Ä–µ–∑ GigaChat –¥–ª—è –æ–¥–Ω–æ–π —Ç–∞–±–ª–∏—Ü—ã RF200 

**–ó–∞–ø—É—Å–∫:**

```bash
python src/run_gigachat.py --tables_dir data/all_tables --table_id 201 --out outputs/201_gigachat_zero.json --mode zero
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**

* `--tables_dir` ‚Äî –ø—É—Ç—å –∫ CSV
* `--table_id` ‚Äî –Ω–æ–º–µ—Ä —Ç–∞–±–ª–∏—Ü—ã
* `--out` ‚Äî –ø—É—Ç—å –∫ –≤—ã—Ö–æ–¥–Ω–æ–º—É JSON
* `--mode` ‚Äî `zero | few`
* `--credentials` ‚Äî API-–∫–ª—é—á (–µ—Å–ª–∏ –Ω–µ –∑–∞–¥–∞–Ω —á–µ—Ä–µ–∑ env)
* `--drop_first_col` ‚Äî `auto | true | false`
* `--drop_header` ‚Äî `true | false`
* `--index_base` ‚Äî `0 | 1`
* `--quiet` ‚Äî –æ—Ç–∫–ª—é—á–∏—Ç—å –≤—ã–≤–æ–¥

---

#### `batch_run_gigachat.py` ‚Äî –ø–∞–∫–µ—Ç–Ω—ã–π –∑–∞–ø—É—Å–∫ GigaChat NER

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:**
–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∑–∞–ø—É—Å–∫ GigaChat NER –¥–ª—è –¥–∏–∞–ø–∞–∑–æ–Ω–∞ —Ç–∞–±–ª–∏—Ü –∏ –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö —Ä–µ–∂–∏–º–æ–≤ 

**–ó–∞–ø—É—Å–∫:**

```bash
python src/batch_run_gigachat.py
```

**–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –≤–Ω—É—Ç—Ä–∏ —Ñ–∞–π–ª–∞:**

* `MODES = ["few"]` ‚Äî –º–æ–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å `["zero", "few"]`
* `TABLE_RANGE = range(201, 226)`
* –≤—ã—Ö–æ–¥: `outputs/{id}_gigachat_{mode}.json`

---

#### `nel_wikidata.py` ‚Äî NEL —á–µ—Ä–µ–∑ Wikidata

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:**
–°–≤—è–∑—ã–≤–∞–µ—Ç —Å—É—â–Ω–æ—Å—Ç–∏ —Å –æ–±—ä–µ–∫—Ç–∞–º–∏ Wikidata –ø–æ —Ç–µ–∫—Å—Ç—É —Å—É—â–Ω–æ—Å—Ç–∏ 

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ `run_nel.py`, –Ω–∞–ø—Ä—è–º—É—é –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è.

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**

* —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Ç–æ–ª—å–∫–æ —Ä—É—Å—Å–∫–∏—Ö —Å—É—â–Ω–æ—Å—Ç–µ–π
* –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤
* –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —á–∏—Å–ª–∞ –∫–∞–Ω–¥–∏–¥–∞—Ç–æ–≤ (`limit`)

---

#### `run_nel.py` ‚Äî –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ NEL –∫ –æ–¥–Ω–æ–º—É —Ñ–∞–π–ª—É

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:**
–î–æ–±–∞–≤–ª—è–µ—Ç `kb_id` (Wikidata) –∫ —Å—É—â–Ω–æ—Å—Ç—è–º –≤ NER-JSON. –° –≤–∫–ª—é—á–µ–Ω–Ω—ã–º –ø—Ä–æ–∫—Å–∏ –º–æ–∂–µ—Ç –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å –æ—à–∏–±–∫–∏.
**–ó–∞–ø—É—Å–∫:**

```bash
python src/run_nel.py --in_ner outputs/201_spacy.json --out outputs/201_spacy_nel.json
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**

* `--in_ner` ‚Äî –≤—Ö–æ–¥–Ω–æ–π NER JSON
* `--out` ‚Äî –≤—ã—Ö–æ–¥–Ω–æ–π JSON —Å NEL
* `--limit` ‚Äî —Å–∫–æ–ª—å–∫–æ –∫–∞–Ω–¥–∏–¥–∞—Ç–æ–≤ –±—Ä–∞—Ç—å –∏–∑ Wikidata
* `--sleep` ‚Äî –ø–∞—É–∑–∞ –º–µ–∂–¥—É –∑–∞–ø—Ä–æ—Å–∞–º–∏
* `--quiet` ‚Äî –æ—Ç–∫–ª—é—á–∏—Ç—å –≤—ã–≤–æ–¥

---

#### `batch_run_nel.py` ‚Äî –ø–∞–∫–µ—Ç–Ω—ã–π –∑–∞–ø—É—Å–∫ NEL

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:**
–ü—Ä–∏–º–µ–Ω—è–µ—Ç NEL –∫–æ –≤—Å–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º NER –≤ –ø–∞–ø–∫–µ `outputs` 

**–ó–∞–ø—É—Å–∫:**

```bash
python src/batch_run_nel.py
```

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**

* –ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç —Ñ–∞–π–ª—ã `*_nel.json`
* —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Å —Å—É—Ñ—Ñ–∏–∫—Å–æ–º `_nel.json`
* –Ω–µ —Ç—Ä–µ–±—É–µ—Ç –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤

---

#### `eval_ner.py` ‚Äî –æ—Ü–µ–Ω–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞ NER

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:**
–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—Ü–µ–Ω–∫–∞ spaCy, GigaChat zero-shot –∏ few-shot –ø–æ test_set 

**–ó–∞–ø—É—Å–∫:**

```bash
python src/eval_ner.py
```
–í–æ—Ç `nel_stats.py` –≤ **—Ç–æ—á–Ω–æ —Ç–∞–∫–æ–º –∂–µ —Ñ–æ—Ä–º–∞—Ç–µ**, –∫–∞–∫ —Ç—ã –ø—Ä–æ—Å–∏—à—å:

---

#### `nel_stats.py` ‚Äî —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞ NEL

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:**
–ü–æ–¥—Å—á—ë—Ç —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ —ç—Ç–∞–ø–∞ —Å–≤—è–∑—ã–≤–∞–Ω–∏—è —Å—É—â–Ω–æ—Å—Ç–µ–π (Entity Linking) –¥–ª—è –º–æ–¥–µ–ª–µ–π spaCy, GigaChat zero-shot –∏ few-shot –±–µ–∑ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ä—É—á–Ω–æ–π —Ä–∞–∑–º–µ—Ç–∫–∏.

**–ó–∞–ø—É—Å–∫:**

```
python src/nel_stats.py
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**

* `--pred_dir` ‚Äî –ø–∞–ø–∫–∞ —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `outputs`)
* `--test_set_dir` ‚Äî –ø–∞–ø–∫–∞ —Å —Ä—É—á–Ω–æ–π —Ä–∞–∑–º–µ—Ç–∫–æ–π (`data/test_set`)
* `--reports_dir` ‚Äî –∫—É–¥–∞ —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –æ—Ç—á—ë—Ç—ã (`reports`)
* `--label_map` ‚Äî —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –º–µ—Ç–æ–∫, –µ—Å–ª–∏ –æ—Ç–ª–∏—á–∞—é—Ç—Å—è(–Ω–∞–ø—Ä–∏–º–µ—Ä `GPE=LOC`)
* `--exclude_labels` ‚Äî –∏—Å–∫–ª—é—á–∞–µ–º—ã–µ –º–µ—Ç–∫–∏
* `--per_label` ‚Äî —Å—á–∏—Ç–∞—Ç—å –º–µ—Ç—Ä–∏–∫–∏ –ø–æ –∫–∞–∂–¥–æ–π –º–µ—Ç–∫–µ
* `--min_id`, `--max_id` ‚Äî –¥–∏–∞–ø–∞–∑–æ–Ω —Ç–∞–±–ª–∏—Ü


### `csv_to_json_template.py`
–°–∫—Ä–∏–ø—Ç –¥–ª—è –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è CSV –≤ JSON-—à–∞–±–ª–æ–Ω –¥–ª—è —Ä—É—á–Ω–æ–π —Ä–∞–∑–º–µ—Ç–∫–∏.  
–§–æ—Ä–º–∏—Ä—É–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É:
```json
{
  "table_name": "...",
  "method": "manual",
  "results": [{ "row": ..., "col": ..., "text": ..., "entities": [] }]
}
```
**–ó–∞–ø—É—Å–∫:**

```bash
python src/csv_to_json_template.py --input data/all_tables/file_name.csv --output data/test_set/file_name.json
```

**–î–æ—Å—Ç—É–ø–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—É—Å–∫–∞:**

* `--input` ‚Äî –ø—É—Ç—å –∫ CSV-—Ñ–∞–π–ª—É
* `--output` ‚Äî –ø—É—Ç—å –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è JSON-—à–∞–±–ª–æ–Ω–∞
* `--drop_first_col` ‚Äî —É–¥–∞–ª–∏—Ç—å –ø–µ—Ä–≤—ã–π —Å—Ç–æ–ª–±–µ—Ü (–Ω—É–º–µ—Ä–∞—Ü–∏—é), `yes/no`
* `--drop_header` ‚Äî —É–¥–∞–ª–∏—Ç—å —Å—Ç—Ä–æ–∫—É –∑–∞–≥–æ–ª–æ–≤–∫–∞, `yes/no` –ø–æ –¥–µ—Ñ–æ–ª—Ç—É `yes`

**–ü—Ä–∏–º–µ—Ä:**

```bash
py csv_to_json_template.py "data\all_tables\221_locations_table.csv" -o "data\test_set\221_locations_table.json" --drop-first-col yes
```

## –¢–∏–ø—ã —Å—É—â–Ω–æ—Å—Ç–µ–π, –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –≤ –ø—Ä–æ–µ–∫—Ç–µ

| –ú–µ—Ç–∫–∞           | –û–ø–∏—Å–∞–Ω–∏–µ                                                             |
| --------------- | -------------------------------------------------------------------- |
| **PER**         | –ò–º—è —á–µ–ª–æ–≤–µ–∫–∞, –ø–µ—Ä—Å–æ–Ω–∞                                                |
| **ORG**         | –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è, –∫–æ–º–ø–∞–Ω–∏—è, —É—á—Ä–µ–∂–¥–µ–Ω–∏–µ                                    |
| **LOC**         | –ö–æ–Ω–∫—Ä–µ—Ç–Ω–æ–µ –º–µ—Å—Ç–æ: –≥–æ—Ä–æ–¥, –¥–µ—Ä–µ–≤–Ω—è, –≥–µ–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–π –æ–±—ä–µ–∫—Ç              |
| **GPE**         | –ì–µ–æ–ø–æ–ª–∏—Ç–∏—á–µ—Å–∫–∞—è —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏—è: —Å—Ç—Ä–∞–Ω–∞, —Ä–µ–≥–∏–æ–Ω, –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω–∞—è –µ–¥–∏–Ω–∏—Ü–∞ |
| **DATE**        | –î–∞—Ç–∞, –≥–æ–¥, –ø–µ—Ä–∏–æ–¥ –≤—Ä–µ–º–µ–Ω–∏                                            |
| **TIME**        | –í—Ä–µ–º—è                                                                |
| **MONEY**       | –î–µ–Ω–µ–∂–Ω—ã–µ —Å—É–º–º—ã                                                       |
| **PERCENT**     | –ü—Ä–æ—Ü–µ–Ω—Ç—ã                                                             |
| **QUANTITY**    | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏–ª–∏ –º–µ—Ä–∞                                                  |
| **EVENT**       | –°–æ–±—ã—Ç–∏–µ                                                              |
| **WORK_OF_ART** | –ü—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –∏—Å–∫—É—Å—Å—Ç–≤–∞, —Ñ–∏–ª—å–º, –∫–Ω–∏–≥–∞, –∫–∞—Ä—Ç–∏–Ω–∞ –∏ —Ç.–ø.                 |
| **PRODUCT**     | –ü—Ä–æ–¥—É–∫—Ç—ã, —Ç–æ–≤–∞—Ä—ã, –º–æ–¥–µ–ª–∏ —Ç–µ—Ö–Ω–∏–∫–∏                                     |
| **LAW**         | –ó–∞–∫–æ–Ω—ã, –Ω–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–µ –∞–∫—Ç—ã                                             |
| **LANGUAGE**    | –Ø–∑—ã–∫–∏                                                                |
| **NORP**        | –ù–∞—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏, —Ä–µ–ª–∏–≥–∏–æ–∑–Ω—ã–µ –∏ –ø–æ–ª–∏—Ç–∏—á–µ—Å–∫–∏–µ –≥—Ä—É–ø–ø—ã                    |
| **FAC**         | –ó–¥–∞–Ω–∏—è, —Å–æ–æ—Ä—É–∂–µ–Ω–∏—è, –∞—ç—Ä–æ–ø–æ—Ä—Ç—ã, –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞                        |
| **MISC**        | –ü—Ä–æ—á–∏–µ –∑–Ω–∞—á–∏–º—ã–µ –æ–±—ä–µ–∫—Ç—ã                                              |

## –û—Ç—á—ë—Ç—ã –æ—Ü–µ–Ω–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞ NER

–û—Ü–µ–Ω–∫–∞ –ø—Ä–æ–≤–æ–¥–∏–ª–∞—Å—å –ø–æ —Ä—É—á–Ω–æ–π —Ä–∞–∑–º–µ—Ç–∫–µ –∏–∑ `data/test_set` —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —Å–∫—Ä–∏–ø—Ç–∞ `eval_ner.py`.
–î–ª—è –∫–∞–∂–¥–æ–π –º–æ–¥–µ–ª–∏ —Å—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω –æ—Ç–¥–µ–ª—å–Ω—ã–π JSON-–æ—Ç—á—ë—Ç –≤ –ø–∞–ø–∫–µ `reports/`.

–ú–µ—Ç—Ä–∏–∫–∏ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–ª–∏—Å—å –ø–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–º —Ñ–æ—Ä–º—É–ª–∞–º:

* **Precision** ‚Äî –¥–æ–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö —Å—É—â–Ω–æ—Å—Ç–µ–π —Å—Ä–µ–¥–∏ –≤—Å–µ—Ö –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö
* **Recall** ‚Äî –¥–æ–ª—è –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö —Å—É—â–Ω–æ—Å—Ç–µ–π –æ—Ç –≤—Å–µ—Ö —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –≤ —Ä–∞–∑–º–µ—Ç–∫–µ
* **F1-score** ‚Äî –≥–∞—Ä–º–æ–Ω–∏—á–µ—Å–∫–æ–µ —Å—Ä–µ–¥–Ω–µ–µ Precision –∏ Recall


### spaCy NER ‚Äî `ner_report_spacy.json`

–ò—Ç–æ–≥–æ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏:

* **Precision:** 0.5107
* **Recall:** 0.2729
* **F1-score:** 0.3557

–û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ:

* Correct (C): 381
* Predicted (A): 746
* Gold (N): 1396

spaCy –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç —É–º–µ—Ä–µ–Ω–Ω—É—é —Ç–æ—á–Ω–æ—Å—Ç—å, –Ω–æ –Ω–∏–∑–∫—É—é –ø–æ–ª–Ω–æ—Ç—É: –º–æ–¥–µ–ª—å —á–∞—Å—Ç–æ –ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç —Å—É—â–Ω–æ—Å—Ç–∏, –æ—Å–æ–±–µ–Ω–Ω–æ –≤ —Å–ª–æ–∂–Ω—ã—Ö —Å–ø–æ—Ä—Ç–∏–≤–Ω—ã—Ö —Ç–∞–±–ª–∏—Ü–∞—Ö. –†—É—Å—Å–∫–∞—è –º–æ–¥–µ–ª—å –¥–ª—è spaCy –∏–º–µ–µ—Ç –≤—Å–µ–≥–æ —Ç—Ä–∏ —Å—É—â–Ω–æ—Å—Ç–∏['LOC', 'ORG', 'PER'], —Ç–∞–∫ —á—Ç–æ –µ—ë —Ç–æ—á–Ω–æ—Å—Ç—å –æ—Å—Ç–∞–≤–ª—è–µ—Ç –∂–µ–¥–∞—Ç—å –ª—É—á—à–µ–≥–æ.

### GigaChat zero-shot ‚Äî `ner_report_gigachat_zero.json`

–ò—Ç–æ–≥–æ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏:

* **Precision:** 0.5236
* **Recall:** 0.1110
* **F1-score:** 0.1832

–û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ:

* Correct (C): 155
* Predicted (A): 296
* Gold (N): 1396

Zero-shot —Ä–µ–∂–∏–º –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∫—Ä–∞–π–Ω–µ –Ω–∏–∑–∫—É—é –ø–æ–ª–Ω–æ—Ç—É: –º–æ–¥–µ–ª—å –∏–∑–≤–ª–µ–∫–∞–µ—Ç –º–∞–ª–æ —Å—É—â–Ω–æ—Å—Ç–µ–π, —Ö–æ—Ç—è —Å—Ä–µ–¥–∏ –Ω–∏—Ö –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–∞—è —á–∞—Å—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞. –ü–æ–¥—Ö–æ–¥–∏—Ç —Ç–æ–ª—å–∫–æ –∫–∞–∫ –±–∞–∑–æ–≤—ã–π –æ—Ä–∏–µ–Ω—Ç–∏—Ä.

### GigaChat few-shot ‚Äî `ner_report_gigachat_few.json`

–ò—Ç–æ–≥–æ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏:

* **Precision:** 0.6811
* **Recall:** 0.3947
* **F1-score:** 0.4998

–û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ:

* Correct (C): 551
* Predicted (A): 809
* Gold (N): 1396

Few-shot —Ä–µ–∂–∏–º –ø–æ–∫–∞–∑–∞–ª –ª—É—á—à–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã:
–∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ –≤—ã—Ä–æ—Å–ª–∏ –∏ —Ç–æ—á–Ω–æ—Å—Ç—å, –∏ –ø–æ–ª–Ω–æ—Ç–∞ –ø–æ —Å—Ä–∞–≤–Ω–µ–Ω–∏—é —Å zero-shot –∏ spaCy.

---

### –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –º–æ–¥–µ–ª–µ–π

| –ú–æ–¥–µ–ª—å             | Precision | Recall | F1-score |
| ------------------ | --------- | ------ | -------- |
| spaCy              | 0.5107    | 0.2729 | 0.3557   |
| GigaChat zero-shot | 0.5236    | 0.1110 | 0.1832   |
| GigaChat few-shot  | 0.6811    | 0.3947 | 0.4998   |

---

–í–æ—Ç –∫–æ—Ä–æ—Ç–∫–æ–µ –∏ –∞–∫–∫—É—Ä–∞—Ç–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –¥–ª—è –æ—Ç—á—ë—Ç–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ç–≤–æ–∏—Ö –¥–∞–Ω–Ω—ã—Ö:

---

## –†–µ–∑—É–ª—å—Ç–∞—Ç—ã NEL (—Å–≤—è–∑—ã–≤–∞–Ω–∏–µ —Å—É—â–Ω–æ—Å—Ç–µ–π)

–î–ª—è –æ—Ü–µ–Ω–∫–∏ —ç—Ç–∞–ø–∞ Entity Linking –±—ã–ª–∞ —Ä–∞—Å—Å—á–∏—Ç–∞–Ω–∞ –¥–æ–ª—è —Å—É—â–Ω–æ—Å—Ç–µ–π, –¥–ª—è –∫–æ—Ç–æ—Ä—ã—Ö —É–¥–∞–ª–æ—Å—å –ø–æ–¥–æ–±—Ä–∞—Ç—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π –æ–±—ä–µ–∫—Ç –≤ –±–∞–∑–µ –∑–Ω–∞–Ω–∏–π Wikidata (linking coverage).

| –ú–æ–¥–µ–ª—å             | –í—Å–µ–≥–æ —Å—É—â–Ω–æ—Å—Ç–µ–π | –°–≤—è–∑–∞–Ω–æ | –ü–æ–∫—Ä—ã—Ç–∏–µ |
| ------------------ | --------------- | ------- | -------- |
| GigaChat few-shot  | 809             | 386     | 47.71%   |
| GigaChat zero-shot | 296             | 238     | 80.41%   |
| spaCy              | 746             | 274     | 36.73%   |

## –í—ã–≤–æ–¥—ã
### NER

* **GigaChat few-shot** –ø–æ–∫–∞–∑–∞–ª –Ω–∞–∏–ª—É—á—à–µ–µ –∫–∞—á–µ—Å—Ç–≤–æ –∏–∑–≤–ª–µ—á–µ–Ω–∏—è —Å—É—â–Ω–æ—Å—Ç–µ–π —Å—Ä–µ–¥–∏ –≤—Å–µ—Ö —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–Ω—ã—Ö –º–æ–¥–µ–ª–µ–π.
* **GigaChat zero-shot** —Ä–µ–∂–∏–º –æ–∫–∞–∑–∞–ª—Å—è –Ω–µ–ø—Ä–∏–≥–æ–¥–Ω—ã–º –¥–ª—è –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∏–∑-–∑–∞ –Ω–∏–∑–∫–æ–π –ø–æ–ª–Ω–æ—Ç—ã.
* **spaCy** –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω—ã–π –±–∞–∑–æ–≤—ã–π —É—Ä–æ–≤–µ–Ω—å, –Ω–æ —É—Å—Ç—É–ø–∞–µ—Ç few-shot LLM –ø–æ –≤—Å–µ–º –∫–ª—é—á–µ–≤—ã–º –º–µ—Ç—Ä–∏–∫–∞–º.

### NEL
* **GigaChat zero-shot** –ø–æ–∫–∞–∑–∞–ª –Ω–∞–∏–±–æ–ª—å—à–µ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ —Å–≤—è–∑—ã–≤–∞–Ω–∏—è (80.41%), —á—Ç–æ —Å–≤—è–∑–∞–Ω–æ —Å —Ç–µ–º, —á—Ç–æ –º–æ–¥–µ–ª—å –∏–∑–≤–ª–µ–∫–∞–µ—Ç –º–µ–Ω—å—à–µ, –Ω–æ –±–æ–ª–µ–µ ‚Äú—á—ë—Ç–∫–∏—Ö‚Äù –∏ –ª–µ–≥–∫–æ —Å–≤—è–∑—ã–≤–∞–µ–º—ã—Ö —Å—É—â–Ω–æ—Å—Ç–µ–π.
* **GigaChat few-shot** –∏–∑–≤–ª–µ–∫–∞–µ—Ç –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ –±–æ–ª—å—à–µ —Å—É—â–Ω–æ—Å—Ç–µ–π, –æ–¥–Ω–∞–∫–æ –¥–æ–ª—è —É—Å–ø–µ—à–Ω–æ —Å–≤—è–∑–∞–Ω–Ω—ã—Ö –Ω–∏–∂–µ –∏–∑-–∑–∞ –Ω–∞–ª–∏—á–∏—è –±–æ–ª–µ–µ —Å–ª–æ–∂–Ω—ã—Ö –∏ –Ω–µ–æ–¥–Ω–æ–∑–Ω–∞—á–Ω—ã—Ö —É–ø–æ–º–∏–Ω–∞–Ω–∏–π.
* **spaCy** –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç –Ω–∞–∏–º–µ–Ω—å—à–µ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ —Å–≤—è–∑—ã–≤–∞–Ω–∏—è, —á—Ç–æ –æ–±—ä—è—Å–Ω—è–µ—Ç—Å—è –±–æ–ª–µ–µ —à—É–º–Ω—ã–º –∏ —Ñ—Ä–∞–≥–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–º –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ–º —Å—É—â–Ω–æ—Å—Ç–µ–π.

–¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, —ç—Ç–∞–ø NEL –Ω–∞–∏–±–æ–ª–µ–µ —Å—Ç–∞–±–∏–ª—å–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è —Å—É—â–Ω–æ—Å—Ç–µ–π, –ø–æ–ª—É—á–µ–Ω–Ω—ã—Ö –≤ zero-shot —Ä–µ–∂–∏–º–µ, –æ–¥–Ω–∞–∫–æ –Ω–∞–∏–±–æ–ª—å—à—É—é –ø–æ–ª–Ω–æ—Ç—É –ø–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É —Å—É—â–Ω–æ—Å—Ç–µ–π –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç few-shot –º–æ–¥–µ–ª—å.